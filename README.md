# EdgeSense-Notify-The-Edge-AI-Based-Smart-Visitor-Detection-System

Components Required 
1. Maixduino Development Board
2.Camera Module (camera that comes with the Maixduino kit)
3. PIR Motion Sensor (for motion detection)
4. MicroSD card (to store face recognition models)
5. Jumper wires
6. Wi-Fi (for MQTT communication)
7. MQTT broker account 
8.Solar Panel
9.lithium battery

EdgeSense Notify
THIS PROJECT AIMS TO CREATE A SMART VISITOR DETECTION SYSTEM USING THE MAIXDUINO KIT.THIS PROJECT USES A PIR MOTION SENSOR TO DETECT MOTION AT THE DOOR,THE CAMERA COMES IN THE KIT CAPTURE AN IMAGE, AND IT SENDS THE IMAGE TO MAIXDUINO'S K210 CHIP AND IT PERFORM FACE DETECTION AND RECOGNITION.IT SENDS NOTIFICATIONS THROUGH MQTT INFORMING THE USER IF A UNKNOWN PERSON IS COME.
HOW THE PROJECT WORKS IS THAT THE PIR MOTION SENSOR DETECTS ANY MOTION IN ITS RANGE,ONCE MOTION IS DETECTED THE CAMERA CONNECTED TO MAIXDUINO TAKE THE IMAGE OF THE SCENE THEN THE MAIXDUINO POWERED USING K210 AI CHIP PROCESS THE IMAGE,THE PRE-TRAINED FACE RECOGNITION MODEL INSERTED IN THE MAIXDUINO’S SD CARD SLOT USING SD CARD DETECTS IF A FACE IS PRESENT IN IMAGE AND IF A FACE IS DETECTED IT COMPARES UNKNOWN FACES AND DETERMINE IF A VISITOR IS THERE OR NOT. AND AT LAST THE BUILT IN ESP32 MODULE IN THE MAIXDUINO BOARD CONNECTS TO A WIFI AND SENT THE VISITOR ALERT USING MQTT.IF A KNOWN FACE IS DETECTED, IT SENDS A "KNOWN VISITOR DETECTED" MESSAGE. IF A UNKNOWN FACE IS DETECTED, AN "UNKNOWN VISITOR DETECTED" MESSAGE IS SENT TO TH USER MOBILE.
HOW THE PROJECT PROCEDURE IS THAT THE PIR MOTION SENSOR IS PLACED NEAR A DOOR. WHEN IT DETECTS MOTION, IT TRIGGER THE CAMERA.THE CAMERA CAPTURE IMAGE AND SENTS TO MAIXDUINO IT PROCESS IT AND DETECT UNKNOWN OR KNOWN VISITOR ONCE IT'S DONE THE MESSAGE IS SENT TO USER USING MQTT.
USING THE MAIXDUINO BOARD IN THE PROJECT.K210 AI CHIP ON THE MAIXDUINO IS THE MAIN PART OF THIS PROJECT. IT HANDLES THE AI TASKS, FACE DETECTION AND RECOGNITION. ONCE AN IMAGE IS CAPTURED BY CAMERA,K210 CHIP PROCESS THE IMAGE TO DETECT FACES AND MATCHES THEM WITH THE PRE-TRAINED DATA TO IDENTIFY VISITORS.THE BUILT-IN ESP32 MODULE PROVIDES WI-FI TO MAIXDUINO. IT IS USED FOR CONNECTING THE SYSTEM TO THE LOCAL WI-FI NETWORK AND COMMUNICATING WITH THE MQTT TO SEND REAL-TIME NOTIFICATIONS TO THE USER.THE PIR MOTION SENSOR CONNECTED TO THE MAIXDUINO’S GPIO PINS ACTIVATE THE ENTIRE PROJECT. IT DETECTS MOTION AND SIGNAL THE CAMERA TO TAKE A PICTURE.
HOW FACE RECOGNITION IS DONE
FACE RECOGNITION WILL BE DONE BY USING THE MAIXDUINO’S K210 AI CHIP, WHICH HAS SUPPORT FOR AI.I WLL BE USING A PRE-TRAINED FACE RECOGNITION MODEL THAT WILL BE LOADED USING A SD CARD INTO THE MAIXDUINO.I WILL USE THE PRE-TRAINED FACE RECOGNITION MODEL IN .KMODELFORMAT.THE SYSTEM CAPTURE IMAGES WHEN MOTION IS DETECTED THEN RUN FACE DETECTION ON THE CAPTURED IMAGE USING THE K210'S HARDWAREAND RECOGNIZE FACES BY COMPARING THE DETECTED FACE WITH KNOWN FACES USING A PRE-TRAINED FACE RECOGNITION MODEL AT LAST IT SENDS A NOTIFICATION THROUGH MQTT,BASED ON FACE IF IT IS KNOWN OR UNKNOWN.
THE PROJECT CODE IS WRITTEN IN C++ USING THE ARDUINO IDE, AND IT WILL USE SEVERAL LIBRARIES
SIPEED_GC0328 FOR CONTROLLING THE CAMERA.
WIFI FOR CONNECTING TO A WI-FI NETWORK.
PUBSUBCLIENT FOR SENDING MQTT NOTIFICATIONS.
FACE LIBRARY FOR FACE RECOGNITION.
TO LOAD THE FACE RECOGNITION MODEL FROM SD CARD.I AM USING

kpu.begin("/sd/face_model.kmodel");

IN THE CODE.
THIS IS THE CODE FOR THE PROJECT

#include <Sipeed_GC0328.h>
#include <WiFi.h>
#include <PubSubClient.h>
#include <Face.h>
Sipeed_GC0328 camera;
face_t faces[5];
KPUClass kpu;
const char* ssid = "my_SSID";
const char* password = "my_PASSWORD";
WiFiClient espClient;
PubSubClient client(espClient);
const char* mqtt_server = "broker.hivemq.com";
int motionPin = 5;
void setup() {
Serial.begin(115200);
camera.begin(CAMERA_R320x240);
setupWiFi();
client.setServer(mqtt_server, 1883);
pinMode(motionPin, INPUT);
kpu.begin("/sd/face_model.kfpkg");
}
void loop() {
if (digitalRead(motionPin) == HIGH) {
Serial.println("Motion detected, capturing image...");
camera.run();
uint8_t* img = camera.getRGB565();
// Detect faces using pre-trained model
int face_count = kpu.faceDetect(img, faces, 5);
if (face_count > 0) {
Serial.print("Detected ");
Serial.print(face_count);
Serial.println(" face(s).");
// Recognize the detected faces
for (int i = 0; i < face_count; i++) {
if (faces[i].score > 85) {
sendMQTTMessage("Known visitor detected!");
} else {
sendMQTTMessage("Unknown visitor detected!");
}
}
} else {
Serial.println("No face detected.");
}
}
// MQTT communication
if (!client.connected()) {
reconnect();
}
client.loop();
}
void setupWiFi() {
delay(10);
Serial.println();
Serial.print("Connecting to ");
Serial.println(ssid);
WiFi.begin(ssid, password);
while (WiFi.status() != WL_CONNECTED) {
delay(500);
Serial.print(".");
}
Serial.println("");
Serial.println("WiFi connected");
Serial.println("IP address: ");
Serial.println(WiFi.localIP());
}
void sendMQTTMessage(String message) {
if (client.connect("Maixduino_Client")) {
client.publish("home/visitor", message.c_str());
Serial.println("Message sent: " + message);
} else {
Serial.println("MQTT Connection Failed!");
}
}
void reconnect() {
while (!client.connected()) {
if (client.connect("Maixduino_Client")) {
Serial.println("MQTT connected");
} else {
delay(5000);
}
}
}
 

SO, THAT’S ABOUT THIS PROJECT.
